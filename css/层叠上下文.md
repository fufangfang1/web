# 层叠上下文

## 生成上下文的方法

1. HTML 中的根元素 html 具有层叠上下文，称为“根层叠上下文”
2. 普通元素设置 position 非 stack 值并设置 z-index 属性为具体值
3. css3 的新属性:
   1. 父元素的 display 属性为 **flex/inline-flex**，子元素的 z-index 属性值**不为 auto**，子元素会产生层叠上下文
   2. 元素的 opacity 属性值**不是 1**
   3. 元素的 transform 属性**不为 auto**
   4. 元素的 mix-blend-mode 属性**不是 normal**
   5. 元素的 filter 属性值**不是 none**
   6. 元素的 isolation **值为 isolate**
   7. will-chang 指定的属性为上边**任意一个**
   8. -webkit-overflow-scrolling **值为 touch**

## 层叠上下文优先级

![优先级](../image/%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87.jpg)

## 总结

1. 首先要比较两个元素是否是处于同一个层叠上下文中（‘_同一个爹_’）
   1. **是** - 谁的层叠等级大，谁在上边
   2. **否** - 先比较它们所处的层叠上下文的层叠等级（‘_不是一个爹的话，先比较爹，谁爹厉害谁在上面_’）
2. 当两个元素的层叠等级相同，层叠顺序相同时，dom 结构中后边的元素层叠等级在前面元素上
   1. **同一个爹，如果是双胞胎的话**标签相同,属性相同*，谁先出生谁在上面*
