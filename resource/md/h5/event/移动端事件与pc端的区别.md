# 移动端事件

## 移动端事件与 pc 端事件的区别

- 触发点不同
  - pc 端
    - `mousemove` 不需要鼠标按下，但是必须在元素上才能触发
    - `mouseup` 必须在元素上抬起鼠标才会触发
  - 移动端
    - `touchmove` 必须手指按下才能触发，但是按下后不在元素上也能触发
    - `touchend` 不需要在元素上抬起就能触发
- 触发顺序
  - `touchstart` --> `touchend` --> `mousedown` --> `click` --> `mouseup`
  - pc 端的事件在移动端会有延迟，大概`300ms`左右
- touchstart 与 click 的区别
  - `touchstart`为手指触碰到元素就触发，`click`为手指碰到元素并且抬起才会触发

## 移动端事件存在的问题

> _事件点透_

出现的场景：有两层重叠的元素，上边的元素有 `touch` 事件（点击后消失），下边是一个默认会触发 `click` 事件的元素（a 标签，表单元素，带 click 的点击事件）

> _解决方案_

1. 下层的元素不要用能点击的标签，并且不要给他们添加事件
2. 把上边的元素的事件换成 `click` 事件
3. 取消事件的默认行为

## 取消事件的默认行为的作用

在谷歌浏览器低版本的情况下，给 `window` `document` `body` 注册 touch 相关的事件阻止`事件的默认行为`会报错
解决方法：把所有的元素用一个 div 包裹起来，给 div 阻止事件的默认行为

> _touchmove_

1. 阻止浏览器的滚动条
2. 阻止了用户的双指缩放

> _touchstart_

1. 解决了 ios10+及部分安卓机通过设置 viewport 禁止用户缩放的功能（双指滑动，双击）
2. 解决了事件点透问题
3. 阻止图片文字被选中
4. 阻止了长按元素会弹出系统菜单
5. 阻止了浏览器回弹的效果
6. 阻止了浏览器的滚动条
7. 阻止了鼠标的事件
8. 阻止了 input 的输入功能

## 事件对象

- touches
  - 位于当前屏幕上的所有手指（必须至少有一个手指在添加触发事件的元素上）
- targetTouches
  - 位于当前 DOM 元素上的手指列表
- changedTouches
  - 触发当前事件的手指列表
